# 2.4 Parsing

Programming language parsers almost always make a single left to right scan over the input, looking ahead one terminal at a time and constructing pieces of the parse tree as they go

In topdown parsers, parsing begins at the root and proceeds toward the leaves

Opposite occurs in bottomup parsers

Top-down parsers are more popular due to the fact that efficient parsers can be constructed more easily by hand using top-down methods

Bottomup parsing can handle a larger class of grammars and translation schemes, so software tools for generating parsers directly often use bottomup methods

## Top-Down Parsing

The topdown construction of a parse tree is done by starting with the root and repeatedly performing the following 2 steps:

1. At node N, labeled with nonterminal A, select one of the productions for A and construct children at N for the symbols in the production body
2. Find the next node at which a subtree is to be constructed, typically the leftmost unexpanded nonterminal of the tree

For some grammars, these two steps can be implemented during a single left to right scan of the input string

The current terminal being scanned in the input is frequently referred to as the lookahead symbol

## Predictive Parsing

Recursive-descent parsing is a topdown method of syntax analysis in which a recursive set of procedures is used to process the input

One procedure is associated with each nonterminal of a grammar

Predictive parsing is a simple recursive-descent parse method in which the lookahead symbol unambiguously determines the flow of control through the procedure body for each nonterminal

Predictive parsing relies on information about the first symbols that can be generated by a production body

We define FIRST(alpha) to be the set of terminals that appear as the first symbols of one or more terminals generated from alpha

If alpha is empty or can generate empty, then empty is also in FIRST(alpha)

The FIRST sets must be considered if there are two productions A → alpha and A → beta

Ignoring empty-productions for the moment, predictive parsing requires FIRST(alpha) to be disjoint from FIRST(beta). The lookahead symbol can then be used to decide which production to use; if the lookahead symbol is in FIRST(alpha), then alpha is used. If in FIRST(beta) then use beta

## Designing a Predictive Parser

Predictive parsing can be used on any grammar that has disjoint FIRST sets for the production bodies belonging to any nonterminal

Recall that a predictive parser is a program consisting of a procedure for every nonterminal

The procedure for nonterminal A does two things:

1. It decides which A production to use based on the lookahead symbol. The production with body alpha (if alpha is not the empty string) is used if the lookahead symbol is in FIRST(alpha). If there is a conflict between two nonempty bodies for any lookahead symbol, this method cannot be used. In addition, the empty-production for A, if it exists, is used if the lookahead symbol is not in the FIRST set for any production body of A
2. The procedure then mimics the body of the chosen production. The symbols of the body are executed in turn, from the left. A nonterminal is executed by a call to the procedure for that nonterminal, and a terminal matching the lookahead symbol is executed by reading the next input symbol. If at some point the terminal in the body doesn’t match the lookahead symbol, a syntax error is reported

## Left Recursion

It is possible for a recursive-descent parser to loop forever with productions like expr → expr + term as the parser will repeatedly jump into the production for expr

Since the lookahead symbol changes only when a terminal in the body is matched, no change to the input took place between recursive calls of expr