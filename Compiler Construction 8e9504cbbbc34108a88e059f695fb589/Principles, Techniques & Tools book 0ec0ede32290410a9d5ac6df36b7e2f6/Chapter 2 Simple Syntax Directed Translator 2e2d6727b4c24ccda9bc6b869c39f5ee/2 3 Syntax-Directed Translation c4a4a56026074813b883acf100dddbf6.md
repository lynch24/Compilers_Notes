# 2.3 Syntax-Directed Translation

Syntax-directed translation is done by attaching rules or program fragments to productions in a grammar. For example, consider an expression expr generated by the production

expr → expr1 + term

Here, expr is the sum of two subexpressions expr1 and term(the subscript in expr1 is used only to distinguish the instance of expr in the body from the head)

We can translate expr by exploiting its structure, as in the following pseudo-code

translate expr1;

translate term;

handle +

## Attributes

Any quantity associated with a programming construct. Examples of attributes are data types of expressions, the number of instructions in the generated code, or the location of the first instruction in the generated code for a construct etc.

Since we use grammar symbols (terms and nonterms) to represent programming constructs, we extend the notion of attributes to symbols that represent them

## Translation Schemes

Syntax directed translation schemes. A translation scheme is a notation for attaching program fragments to the productions of a grammar. The program fragments are executed when the production is used during syntax analysis.

The combined result of all these fragment executions, in the order induced by the syntax analysis, produces the translation of the program

## Synthesised attributes

Associating quantities with programming constructs can also be expressed in grammars. We associate attributes with terminals and nonterminals.

We attach rules to the productions of a grammar; these rules describe how attributes are computed at the nodes of the parse tree where the production in question is used to relate a node to its children

A syntax-directed definition associates

1. With each grammar symbol, a set of attributes
2. With each production, a set of semantic rules for computing the values of the attributes associated with the symbols appearing in the production

![Untitled](2%203%20Syntax-Directed%20Translation%20c4a4a56026074813b883acf100dddbf6/Untitled.png)

An attribute is said to be synthesised if its value at a parse tree node N is determined from attribute values at the child nodes of N and at N itself

Synthesised attributes have a desirable quality of being capable of evaluation during a single bottomup traversal of a parse tree

![Untitled](2%203%20Syntax-Directed%20Translation%20c4a4a56026074813b883acf100dddbf6/Untitled%201.png)

Here, || means concatenation

## Simple Syntax Directed Definitions

A syntax directed definition is simple if the translation of nonterminal of the head of the production rule and the translation using the semantic rules result in the same nonterminals in the same order

![Untitled](2%203%20Syntax-Directed%20Translation%20c4a4a56026074813b883acf100dddbf6/Untitled%202.png)

Here, the nonterminals expr and term appear in the same order in the production body and in the semantic rule, the positioning of the terminal + doesn’t matter

There are no additional symbols before or between their translations

A simple syntax directed definition can be implemented by printing only the additional strings, in the order they appear in the definition

## Translation Schemes

A different approach to translation using program fragments instead of semantic rules to construct our resulting translations - program fragments = “semantic actions”

![Untitled](2%203%20Syntax-Directed%20Translation%20c4a4a56026074813b883acf100dddbf6/Untitled%203.png)

Left to right depth first traversal

The semantic actions in the parse tree in figure 2.14 translate the infix expression by printing each character exactly once, without using any storage for the translation of subexpressions

When the output is created incrementally like this, the order in which characters are printed is significant

The implementation of a translation scheme must ensure that semantic actions are performed in the order they would appear during a postorder traversal of a parse tree

The implementation need not actually construct a parse tree, as long as it ensures that the actions are performed as if it were constructed and then executed during a postorder traversal